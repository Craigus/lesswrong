<%!
  from r2.lib.template_helpers import static
  from routes.util import url_for
%>
<%namespace name="utils" file="utils.html" import="error_field, submit_form"/>

<h1>New Meetup</h1>

<%utils:submit_form action="/meetups" onsubmit="return post_form(this, 'meetups', null, null, true, '/')" _id="newmeetup" _class="meetup" tzoffset="0" latitude="0" longitude="0">
<fieldset>
  <label for="title">${_("Title")}:</label>
  <input id="title" name="title" value="${thing.title}" onfocus="clearTitle(this)" type="text" />
  ${error_field("NO_TITLE", "span")}
  ${error_field("TITLE_TOO_LONG", "span")}
</fieldset>

<fieldset>
  <label for="location">${_("Location")}:</label>
  <input id="location" name="location" value="${thing.location}" type="text" />
  <img id="geocode_status" src="${static('spinner.gif')}" alt="status" style="display: none;" />
  <div id="geocoded_location">Enter the meetup address above</div>
  ${error_field("NO_LOCATION", "span")}
</fieldset>

<fieldset>
  <label for="description">${_("Description")}:</label>
  <textarea id="description" name="description" rows="5" cols="35">
  </textarea>
  ${error_field("NO_DESCRIPTION", "span")}
</fieldset>

<fieldset>
  <label for="date">${_("Date")}:</label>
  <input id="date" class="date" name="timestamp" value="${thing.date}" type="text" />
  ${error_field("NO_DATE", "span")}
  ${error_field("INVALID_DATE", "span")}
</fieldset>

<button class="btn" type="submit">${_("Create Meetup")}</button>
<span id="status" class="error"></span>
</%utils:submit_form>

<script src="${static('meetups.js')}" type="text/javascript" charset="utf-8"></script>