<%
  article = thing.article
  url = article.url
%>
<ul class="clear">
<li class="clear">
<%
  prev_link = article.prev_by_author()
  next_link = article.next_by_author()
%>
%if prev_link:
  <a class="nav" href="${prev_link.url}"><img src="/static/articlenav-prev.gif" alt="Previous" /></a>
%else:
  <img src="/static/articlenav-prev-grey.gif" alt="Previous" />
%endif
##  <span class="place">post ${CurrentIndexByAuthor} of ${TotalPostsByAuthor}</span>
  <span class="place">by author</span>
%if next_link:
  <a class="nav" href="${next_link.url}"><img src="/static/articlenav-next.gif" alt="Next" /></a>
%else:
  <img src="/static/articlenav-next-grey.gif" alt="Next" />
%endif
##  <span class="type">by &nbsp; ${unsafe(self.author(friend = thing.friend))}</span>
  <span class="type">TODO add author</span>
</li>

%for sequence_name in article.get_sequence_names():
<%
  prev_link = article.prev_in_sequence(sequence_name)
  next_link = article.next_in_sequence(sequence_name)
%>
<li class="clear">
%if prev_link is None:
  <img src="/static/articlenav-prev-grey.gif" alt="Previous" />
%else:
  <a class="nav" href="${prev_link}"><img src="/static/articlenav-prev.gif" alt="Previous" /></a>
%endif
##  <span class="place">post ${finalIndexForThisArticle} of ${finalArticleCount}</span>
  <span class="place">in sequence</span>
%if next_link is None:
  <img src="/static/articlenav-next-grey.gif" alt="Next" />
%else:
  <a class="nav" href="${next_link}"><img src="/static/articlenav-next.gif" alt="Next" /></a>
%endif
## <span class="type">in &nbsp; '<a href="http://wiki.lesswrong.com/wiki/${finalSequenceWikipageTitleWithUnderscores}">${finalSequenceWikipageTitle}</a>' sequence</span>
  <span class="type"><a href="http://wiki.lesswrong.com/wiki/${sequence_name}">${sequence_name}</a></span>
</li>

%endfor

%if article.blessed:
<%
  prev_link = article.prev_in_promoted()
  next_link = article.next_in_promoted()
%>
<li class="clear">
%if prev_link:
  <a class="nav" href="${prev_link.url}"><img src="/static/articlenav-prev.gif" alt="Previous" /></a>
%else:
  <img src="/static/articlenav-prev-grey.gif" alt="Previous" />
%endif
##  <span class="place">post ${CurrentIndexInPromoted} of ${TotalPostsInPromoted}</span>
  <span class="place"><a href="http://lesswrong.com/">Promoted Posts</a></span>
%if next_link:
  <a class="nav" href="${next_link.url}"><img src="/static/articlenav-next.gif" alt="Next" /></a>
%else:
##  <span class="type">in &nbsp; <a href="http://lesswrong.com/">Promoted Posts</a></span>
  <img src="/static/articlenav-next-grey.gif" alt="Next" />
%endif
</li>
%endif


<%
  prev_link = article.prev_link()
  next_link = article.next_link()
%>
<li class="clear">
%if prev_link:
  <a class="nav" href="${prev_link.url}"><img src="/static/articlenav-prev.gif" alt="Previous" /></a>
%else:
  <img src="/static/articlenav-prev-grey.gif" alt="Previous" />
%endif
##  <span class="place">post ${CurrentIndexInAll} of ${TotalPostsInAll}</span>
  <span class="place"><a href="http://lesswrong.com/new/">All Posts</a></span>
%if next_link:
  <a class="nav" href="${next_link.url}"><img src="/static/articlenav-next.gif" alt="Next" /></a>
%else:
##  <span class="type">in &nbsp; <a href="http://lesswrong.com/new/">All Posts</a></span>
  <img src="/static/articlenav-next-grey.gif" alt="Next" />
%endif
</li>


%if hasattr(article, 'top_link') and article.top_link:
<%
  prev_link = article.prev_in_top()
  next_link = article.next_in_top()
%>
<li class="clear">
%if prev_link:
  <a class="nav" href="${prev_link.url}"><img src="/static/articlenav-prev.gif" alt="Previous" /></a>
%else:
  <img src="/static/articlenav-prev-grey.gif" alt="Previous" />
%endif
##  <span class="place">post ${CurrentIndexInTop} of ${TotalPostsInTop}</span>
  <span class="place"><a href="http://lesswrong.com/top/">Top Posts</a></span>
%if NextLinkInTop:
  <a class="nav" href="${next_link.url}"><img src="/static/articlenav-next.gif" alt="Next" /></a>
%else:
##  <span class="type">in &nbsp; <a href="http://lesswrong.com/top/">Top Posts</a></span>
  <img src="/static/articlenav-next-grey.gif" alt="Next" />
%endif
</li>
%endif


%for tag in article.get_tags():
<%
  prev_link = article.prev_by_tag(tag)
  next_link = article.next_by_tag(tag)
%>
<li class="clear">
%if prev_link:
  <a class="nav" href="${prev_link.url}"><img src="/static/articlenav-prev.gif" alt="Previous" /></a>
%else:
  <img src="/static/articlenav-prev-grey.gif" alt="Previous" />
%endif
##  <span class="place">post ${CurrentIndexInTop} of ${TotalPostsInTop}</span>
  <span class="place">by tag</span>
%if next_link:
  <a class="nav" href="${next_link.url}"><img src="/static/articlenav-next.gif" alt="Next" /></a>
%else:
  <img src="/static/articlenav-next-grey.gif" alt="Next" />
%endif
## <span class="type">by tag &nbsp; <a href="http://lesswrong.com/tag/${TagNamesByTag[index]}">${TagNamesByTag[index]}</a></span>
  <span class="type"><a href="${tag.path}">${tag.name}</a></span>
</li>
%endfor
</ul>
